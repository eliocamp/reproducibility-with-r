<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.80.0" />
<title>03: Reporting with R Markdown | An R reproducibility toolkit for the practical researcher</title>








  
    
  
<meta name="description" content="Reproducibility course in R">


<meta property="og:site_name" content="An R reproducibility toolkit for the practical researcher">
<meta property="og:title" content="03: Reporting with R Markdown | An R reproducibility toolkit for the practical researcher">
<meta property="og:description" content="Reproducibility course in R" />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://eliocamp.github.io/reproducibility-with-r/materials/day1/03-rmarkdown/" />
<meta property="og:locale" content="en">




      
          <meta property="og:image" content="https://eliocamp.github.io/reproducibility-with-r/materials/day1/sidebar.png" >
          <meta property="twitter:card" content="summary_large_image">
          <meta name="twitter:image" content="https://eliocamp.github.io/reproducibility-with-r/materials/day1/sidebar.png" >
      
      
  <meta itemprop="name" content="03: Reporting with R Markdown">
<meta itemprop="description" content="R Markdown files     An R Markdown file is a plain text file, with some rules and special syntax that allow you to write code and text together. When it is “knitted,” the code will be evaluated and executed and the text formatted so that it creates a reproducible report or document that is nice to read and contains all your work.
This is really critical to reproducibility since it automates the creation of a paper or report, which also has the side effect of saving time.">
<meta itemprop="datePublished" content="2023-10-01T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-03-15T00:00:00+00:00" />
<meta itemprop="wordCount" content="2510">



<meta itemprop="keywords" content="" />

  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/reproducibility-with-r/style.main.min.5c14ccb91905d450469e4040c74b4193d2441462e073a51188cded19e3799fd6.css" integrity="sha256-XBTMuRkF1FBGnkBAx0tBk9JEFGLgc6URiM3tGeN5n9Y=" media="screen">
  
  
  <script src="/reproducibility-with-r/panelset.min.41f62c42d5f25dd80e81136866f4f1baa1bc17669edfd002e75c0e107953789b.js" type="text/javascript"></script>
  
  
  <script src="/reproducibility-with-r/main.min.07ec8e08cbb63db3a2cf7d4a7df6f7be00c715f13b64d8df6a2c48441ba8b14b.js" type="text/javascript"></script>
  
  
</head>
<body>
      <div class="grid-container single-series">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://eliocamp.github.io/reproducibility-with-r/" title="Home">
      <img src="/reproducibility-with-r/logo.png" class="dib db-l h2 w-auto" alt="An R reproducibility toolkit for the practical researcher">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/reproducibility-with-r/about/" title="About this course">About this course</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/reproducibility-with-r/materials/" title="Materials">Materials</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/reproducibility-with-r/people/" title="About us">About us</a>
      
      
    </div>
  </nav>
</header>


<main class="page-main ph4 pt4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 pr3-l">
      <header class="post-header">
        <h4 class="breadcrumb pb5">

 
 
    
 
 
    
 
 
    
 

  
    
      <a href="/reproducibility-with-r/materials/">An R reproducibility toolkit for the practical researcher</a> >
    


  
    
      <a href="/reproducibility-with-r/materials/day1/">Day 1</a> >
    


  
    
      03: Reporting with R Markdown
    


</h4>




        
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">03: Reporting with R Markdown</h1>
        
        <p class="f6 measure lh-copy mv1">By Paola Corrales and Elio Campitelli</p>
        
        
        
      
        
      </header>
      <section class="post-body pt5 pb4">
        



<h2 id="r-markdown-files">R Markdown files
  <a href="#r-markdown-files"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>An R Markdown file is a plain text file, with some rules and special syntax that allow you to write code and text together.
When it is “knitted,” the code will be evaluated and executed and the text formatted so that it creates a reproducible report or document that is nice to read and contains all your work.</p>
<p>This is really critical to reproducibility since it automates the creation of a paper or report, which also has the side effect of saving time.
Since the document will recreate the figures and text each time you knit it, you won’t need to copy-paste plots between R and Word, LaTeX or whatever tool you are using to write your report each time you make some trivial change.</p>
<p>Now let’s create a new R Markdown file.
In RStudio you can use the menu bar:</p>
<div class="instructions">
<p>File → New File → R Markdown</p>
</div>
<p>A new window will open where you can <em>optionally</em> complete with your name, author and the output format.
Let try HTML output first.
A new file with a template document will open up when you click OK.
This includes a brief demonstration of R Markdown capabilities.
You can try to “knit” the file to see the output document.</p>
<div class="activity">
<p>Your turn</p>
<ol>
<li>
<p>Create a new R Markdown file.
You can choose the output format.</p>
</li>
<li>
<p>Knit the sample document.</p>
</li>
<li>
<p>Compare the “source file” with the “output file”.
Can you identify the different sections of the file?</p>
</li>
</ol>
</div>
<div class="notes">
<p>What about Quarto?</p>
<p><a href = "https://quarto.org/">Quarto</a> is a new implementation of this same concept.
It’s billed as a “next generation version of R Markdown” because it incorporates a lot of lessons learned from its development and adds other features.
It also doesn’t need R to run, so it’s more language agnostic.</p>
<p>However, Quarto is still missing the large collection of scientific journal templates offered by the rticles package.</p>
<p>Many of the features and syntax shown here work with little or no changes in Quarto.</p>
</div>




<h3 id="file-structure">File structure
  <a href="#file-structure"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Any R Markdown file will have 3 sections or areas:</p>
<figure>
<img src="images/rmarkdown.png" alt="Rmarkdown file in the left. Knited document on the right. The YAML, chunk codes and text areas are highlighted on the file." />
<figcaption aria-hidden="true">Rmarkdown file in the left. Knited document on the right. The YAML, chunk codes and text areas are highlighted on the file.</figcaption>
</figure>
<ul>
<li>
<p>The top part is called the <strong>header</strong> and uses YAML syntax and includes the title and the output type (which in this case is an HTML document) and other metadata.</p>
</li>
<li>
<p>Below the heather goes the document proper, which has <em>white</em> and <em>grey</em> sections.
These are the two main sections that make up an R Markdown file:</p>
<ul>
<li>
<p>Grey sections are <strong>code chunks</strong>.
They will be evaluated in order and any output will be inserted in the output document.</p>
</li>
<li>
<p>White sections are text sections and support markdown for styling.</p>
</li>
</ul>
</li>
</ul>




<h4 id="header">Header
  <a href="#header"></a>
</h4>
<p>The header is a series of instructions organized between three dashes (<code>---</code>) that define the global properties of the document, such as the title, the output format, authorship information, etc..
You can also change options associated with the output format, such as the style of the table of contents or index.
The heather will grow much much larger as you start using templates and customised reports.</p>
<p>The YAML format allows you to define hierarchical lists in a humanly readable way.
For example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#434f54">---</span>
<span style="color:#434f54">title</span>: <span style="color:#7f8c8d">&#34;My first markdown&#34;</span>
<span style="color:#434f54">output</span>: 
  <span style="color:#434f54">html_document</span>:
    <span style="color:#434f54">code_download</span>: <span style="color:#00979d">true</span>
    <span style="color:#434f54">toc</span>: <span style="color:#00979d">true</span>
    <span style="color:#434f54">toc_float</span>: <span style="color:#00979d">false</span>
<span style="color:#434f54">---</span>
</code></pre></div><div class="notes">
<p>Mind the indentation!</p>
<p>It is very important to maintain the indentation of the elements, since it defines the hierarchy of each element.
Many of the errors you’ll find when knitting will be rooted in indentation issues.</p>
</div>




<h4 id="code-chunks">Code chunks
  <a href="#code-chunks"></a>
</h4>
<p>The R code is written inside code “chunks”.
Code chunks start with <code>```{r label}</code> (where “label” is an optional and unique name) and end with <code>```</code>.
Everything you include between these delimiters will be interpreted by R as code and will be executed it when the file is knitted.
Any output (graphics, tables, text, etc..) will be inserted into the final document in the same order as they are in the R Markdown file (or “roughly in the same order” if you’re knitting to PDF).</p>
<div class="instructions">
<p>You can create a new chunk with:</p>
<ol>
<li>The “+C” green bottom on the top right of the document</li>
<li>A very handy shortcut: <code>Ctrl + Alt + I</code></li>
<li>Writing ```{r} by hand (but why would you?)</li>
</ol>
</div>
<p>While the code will run line by line when you knit the file, during writing it is very convenient to run individual chunks interactively as if it were in the console.</p>
<p>To run the line where your cursor is use the shortcut:</p>
<div class="instructions">
<p>Ctrl + Enter</p>
</div>
<p>But you can also run the code of the whole chunk with:</p>
<div class="instructions">
<p>Ctrl + Shift + Enter</p>
</div>
<p>By default, the output will appear immediately below the chunk.</p>




<h4 id="text">Text
  <a href="#text"></a>
</h4>
<p>The plain text sections of an R Markdown files is interpreted as Markdown.
You can get a guide to rmarkdown 
<a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" target="_blank" rel="noopener">in this</a> cheat sheet, but here is a minimum syntax to get you started:</p>
<ul>
<li>headers start with <code>#</code> or <code>##</code> and so on (it’s important to put a space after the last <code>#</code>).</li>
<li>bold text is surrounded with <code>**</code> or <code>__</code>.</li>
<li>and italic text, with <code>*</code> or <code>_</code>.</li>
</ul>
<p>You can also add equations and other symbols with LaTeX in line (<code>`$E = mc^2$`</code> looks like <code>\(E = mc^2\)</code>) or in its own line as:</p>
<pre><code>$$
y = \mu + \sum_{i=1}^p \beta_i x_i + \epsilon
$$
</code></pre>
<p>It looks like:</p>
<p>$$
y = \mu + \sum_{i=1}^p \beta_i x_i + \epsilon
$$</p>
<div class="notes">
<p>In-line code</p>
<p>You may find yourself mentioning results in the text, for example something like “the average minimum temperature for the month of March was 18 degrees”.
And it is also possible that this value will change if you use a different database or if you then generate the same report for different months.
The chances of you forgetting to update that “18” are high, that’s why R Markdown also has the possibility to incorporate in-line code.</p>
<p>Let’s imagine that you have a variable <code>temperature</code> to which you assign the value “18”:</p>
<pre><code>temperature &lt;- 18
</code></pre>
<p>To use that value in the text you have to put the name of that variable between two “`” and to indicate that it is R code this way <code>`r temperature`</code>.
Then if at any time the value of the variable changes, the next time you knit the document it will be updated in the text.</p>
</div>




<h3 id="chunk-control">Chunk control
  <a href="#chunk-control"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>You may have noticed that code chunks in the template document include some information between the <code>{r }</code>.
Besides the chunk name you can also add options to control how the chuck will behave when the file is knitted.
Usually the code chunk will be included in the output, which is fine when you or the person that will read the report wants to see the code that generates those results, but it might not be what the final audience of the report might need.
It’s up to you to decide if you want to show the code or not.</p>
<p>To change the options of a code chunk, all you have to do is list the options inside the square brackets.
For example:</p>
<pre><code class="language-default" data-lang="default">```{r chunk-name, echo = FALSE, message = FALSE}

```
</code></pre><p>A particularly important set of options are the ones that control whether the code is executed and whether the result of the code will remain in the report or not:</p>
<ul>
<li>
<p><code>echo = FALSE</code> runs the code chunk and displays the results, but hides the code in the report.
This is useful for writing reports for people who do not need to see the R code that generated the graph or table.</p>
</li>
<li>
<p><code>include = FALSE</code> runs the code but hides both the code and any output.
It is useful to use in general configuration chunks where you load libraries.</p>
</li>
<li>
<p><code>eval = FALSE</code> prevents the code chunk from being run at all.
Naturally, it will not display results either.
It is useful for displaying example code if you are writing, for example, a document to teach R or if you want to suppress specific parts of your code.</p>
</li>
</ul>
<p>If you are writing a report where you don’t want any code to be shown, adding <code>echo = FALSE</code> to each new chunk becomes tedious.
The solution is to change the option globally so that it applies to all chunks.
This is done by the <code>knitr::opts_chunk$set()</code> function, which sets the global options of the chunks that follow it.
You’ll find this function on the first “setup” chunk.</p>
<pre><code class="language-default" data-lang="default">```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                  message = FALSE,
                  warning = FALSE)
```
</code></pre><div class="notes">
<p>Figures control</p>
<p>If the output of the chunk is a figure you have a ton of options to control its aspect. From it size, resolution, caption, etc..
You can start typing “fig.” inside the <code>{ }</code> to explore the options.</p>
</div>
<div class="notes">
<p>RStudio Visual editor</p>
<p>Recent versions of RStudio include a 
<a href="https://rstudio.github.io/visual-markdown-editing/" target="_blank" rel="noopener">Visual Editor</a> which allows you to write Markdown markup, add citations, tables, etc. with a friendly GUI.</p>
</div>




<h3 id="managing-references">Managing references
  <a href="#managing-references"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>If you are here to use rmarkdown to write papers or reports, you may need to add references to other papers or sources. Similarly to LaTeX, you’ll need a .bib file with all the references you want to include in the document. While we don’t have time to explore tools to create and manage this type of file, we recommend you to explore 
<a href="https://www.zotero.org/" target="_blank" rel="noopener">Zotero</a> (open source) or 
<a href="https://www.mendeley.com/" target="_blank" rel="noopener">Mendeley</a>.</p>
<p>Provided you have the <code>references.bib</code> file in your project, you need to include that in the yaml of the file:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#434f54">---</span>
<span style="color:#434f54">title</span>: <span style="color:#7f8c8d">&#34;My first markdown&#34;</span>
<span style="color:#434f54">output</span>: 
  pdf_document
<span style="color:#434f54">bibliography</span>: references.bib
<span style="color:#434f54">---</span>
</code></pre></div><p>Each reference will have a key that defines it.
To insert a reference with, use <code>@key</code>, or <code>[@key]</code> or <code>[@key; @key2]</code> to insert them inside parenthesis.</p>
<p>It is also possible to use the LaTeX syntax but we prefer the markdown sintax to be able to knit the report to many type of outputs.</p>




<h2 id="r-markdown-templates">R Markdown Templates
  <a href="#r-markdown-templates"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>




<h3 id="using-rticles">Using rticles
  <a href="#using-rticles"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>If you have to write a report or document for your institution or maybe a paper for a scientific journal, you may want to use a template to change the look of the final document.
Depending on the output format, templates will be different.
In this section will focus on PDF files.</p>
<p>For scientific journals you may find the 
<a href="https://pkgs.rstudio.com/rticles/index.html" target="_blank" rel="noopener"><strong>rticles</strong></a> package very useful.
This package includes several templates –most of them contributed by the R community– so you can create journal-specific PDFs directly from RMarkdown.
We recommend installing the development version from GitHub, which often includes new or updated article formats.</p>
<p>After installing rticles you’ll need to restart RStudio for its templates to be available in the UI.</p>
<p>To use rticles from RStudio, you can access the templates through <code>File -&gt; New File -&gt; R Markdown</code>.
This will open the dialogue box where you can select from one of the available templates:</p>
<figure>
<img src="images/rticles.png" alt="New R Markdown dialog box with the list of available templates" />
<figcaption aria-hidden="true">New R Markdown dialog box with the list of available templates</figcaption>
</figure>
<p>This will create a folder containing a Rmd file using the corresponding output format and all the assets required by it.</p>
<div class="activity">
<p>Your turn!</p>
<ol>
<li>Create a new R Markdown file using one template of your choosing</li>
<li>Check the options in the YAML and change a few of the fields. It doesn’t have to be real information!</li>
<li>Knit the document to see the output.</li>
</ol>
</div>




<h3 id="beyond-the-usual-templates">Beyond the usual templates
  <a href="#beyond-the-usual-templates"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Now, what happens if rticles doesn’t have the template you need?
Usually, journals provide LaTeX templates that you can use and <strong>adapt</strong> to use within R Markdown.
This will require some knowledge of LaTeX and 
<a href="https://pandoc.org/MANUAL.html#templates" target="_blank" rel="noopener">Pandoc templates</a>, and some patience and coffee/tea/mate to deal with knitr errors.
If you go through the trouble of adapting a template, consider 
<a href="https://github.com/rstudio/rticles/pulls" target="_blank" rel="noopener">contributing</a> it to rticles so that others can benefit from your sweat and tears.</p>
<div class="note">
<p><a href="https://bmcmedicine.biomedcentral.com/articles/10.1186/s12916-023-02882-y#Sec3">One estimate</a> put the amount of work required to format and re-format academic submissinos to comply with journal templates at around 230 million USD in 2001.
Also, it’s not always mandatory to submit your paper using the journal template.</p>
</div>
<div class="activity">
<p>Adapting a template</p>
<ol>
<li>
<p>Create a new R Markdown file using PDF as a output format and save it into your project (for example, <code>paper.Rmd</code>).</p>
</li>
<li>
<p>Download the AGU Geophysical Research Letters template from 
<a href="https://www.agu.org/-/media/files/publications/august-2022-latex-templates.zip" target="_blank" rel="noopener">here</a>. Inside the file there’s a <code>Feb-3-22-latex-templates</code> folder with 8 files. Extract all those files into the same folder you saved the R Markdown.
You need to have a folder in your project with these files:</p>
<pre><code>.
├── agujournal2019.cls
├── agujournaltemplate.pdf
├── agujournaltemplate.synctex.gz
├── agujournaltemplate.tex
├── agutexSI2019.cls
├── paper.Rmd
├── paper.Rproj
├── si_template_2019.tex
├── trackchanges-0.7.0
└── trackchanges.sty
</code></pre>
</li>
<li>
<p>Change the YAML of the R Markdown file to include the following:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#434f54">---</span>
<span style="color:#434f54">title</span>: <span style="color:#7f8c8d">&#34;A very nice Title&#34;</span>
<span style="color:#434f54">author</span>: <span style="color:#7f8c8d">&#34;Pao Corrales&#34;</span>
<span style="color:#434f54">date</span>: <span style="color:#7f8c8d">&#34;3/1/2022&#34;</span>
<span style="color:#434f54">output</span>: 
  <span style="color:#434f54">pdf_document</span>:
    <span style="color:#434f54">template</span>: <span style="color:#7f8c8d">&#34;agujournaltemplate.tex&#34;</span>
    <span style="color:#434f54">pandoc_args</span>: 
      - <span style="color:#7f8c8d">&#34;--wrap=none&#34;</span>
<span style="color:#434f54">---</span>
</code></pre></div><p>This new line will tell to knit to use the <code>agujournaltemplate.tex</code> file as template.
The template needs some tweaking, though.
Take care to repsect the identation and that each parameter is in its own line.</p>
</li>
<li>
<p>Set the global option <code>echo = FALSE</code></p>
<p>To do this, look for the line <code>knitr::opts_chunk$set(echo = TRUE)</code> and change it to <code>knitr::opts_chunk$set(echo = FALSE)</code></p>
</li>
<li>
<p>In the <code>agujournaltemplate.tex</code> file, add <code>\usepackage{hyperref}</code> in line 63 (or anywhere before <code>\begin{document}</code>. Also, remove remove everything from line 174 (around <code>%  BODY TEXT</code> to line 413 (right before <code>\end{document}</code>).</p>
</li>
<li>
<p>Knit!</p>
<p>Open paper.pdf and you will see a rendered PDF in the style of the AGU journal. However, none of the contect in the R Markdown file it reflected in the PDF! You have to modify the template to connect the dots.</p>
</li>
<li>
<p>Again in the <code>agujournaltemplate.tex</code> file, change <code>\title{=enter title here=}</code> (line 78) for <code>\title{$title$}</code></p>
</li>
<li>
<p>Knit again!</p>
<p>Now, the title in the R Markdown file and the pdf are the same.
<code>`$title$`</code> in the LaTeX template will be replaced by the value of <code>title</code> supplied by the YAML header.</p>
</li>
<li>
<p>Let’s also include the content of the R Markdown file. In the LaTeX template, go to right before <code>\end{documnet} (around line 174) and add ``</code>$body$<code>`` (without the backticks). The special variable</code>body` will be replaced by the actual rendered contents of the R Markdown file.</p>
</li>
<li>
<p>Knit again!</p>
<p>This time you’ll see the sample R Markdown document in the PDF.</p>
</li>
<li>
<p>You can add new options to the YAML header and then use the same trick so they are used by the LaTeX template. For example, add a new option called “abstract” and write some text, like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#434f54">---</span>
<span style="color:#434f54">title</span>: <span style="color:#7f8c8d">&#34;A very nice Title&#34;</span>
<span style="color:#434f54">author</span>: <span style="color:#7f8c8d">&#34;Pao Corrales&#34;</span>
<span style="color:#434f54">date</span>: <span style="color:#7f8c8d">&#34;3/1/2022&#34;</span>
<span style="color:#434f54">output</span>: 
  <span style="color:#434f54">pdf_document</span>:
    <span style="color:#434f54">template</span>: <span style="color:#7f8c8d">&#34;agujournaltemplate.tex&#34;</span>
    <span style="color:#434f54">pandoc_args</span>: 
      - <span style="color:#7f8c8d">&#34;--wrap=none&#34;</span>        
<span style="color:#434f54">abstract</span>: <span style="color:#7f8c8d">&#34;This is the very interesting abstract.&#34;</span> 
<span style="color:#434f54">---</span>
</code></pre></div><p>Then, in the LaTeX template search for <code>[ enter your Abstract here ]</code> (~line 166) and replace it with <code>`$abstract$`</code> (without backticks).</p>
</li>
<li>
<p>One final knit to see the result!</p>
</li>
<li>
<p>(Optional) Add more variables, such as a Plain Language Summary, author, mail of the corresponding author.</p>
</li>
</ol>
<p>Having problems? You can watch a video on how to solve this activity 
<a href="https://www.youtube.com/watch?v=bk3mcRIJLqc" target="_blank" rel="noopener">here</a> and follow along (the video was made with an slightly older version of the template but everything is almost the same except for the precise line numbers).</p>
</div>
<div class="notes">
<p>Pandoc template syntax</p>
<p>The template uses something called Pandoc Templates, which has a specific syntax.
You can read more in 
<a href="https://pandoc.org/MANUAL.html#templates" target="_blank" rel="noopener">the documentation</a>.</p>
</div>




<h2 id="resources">Resources
  <a href="#resources"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>
<a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" target="_blank" rel="noopener">R Markdown cheatsheet</a></p>
<p>
<a href="https://bookdown.org/yihui/rmarkdown/" target="_blank" rel="noopener">R Markdown: The Definitive Guide</a></p>
<p>
<a href="https://github.com/rstudio/rticles" target="_blank" rel="noopener">rticles package documentation</a></p>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="https://eliocamp.github.io/reproducibility-with-r/materials/day1/02-projects/">&larr; 02: A tidy project is a happy project</a>
  
  
  
</div>

      </footer>
    </article>
    
  </section>
</main>

<aside class="page-sidebar" role="complementary">
                         
 











  <img src="/reproducibility-with-r/materials/day1/sidebar.png" class="db ma0">

                         
 



<div class="flex items-start sticky ph4 pb4 flex-row">
  <div class="w-two-thirds w-50-l ph0">
    <h2 class="mv3 f5 fw7 ttu tracked">
      <a class="no-underline dim" href="/reproducibility-with-r/materials/">Outline</a></h2>
    <nav id="SectionTableOfContents" aria-label="SectionTableOfContents">
        <ul>
        
          
          
          <li class="" hugo-nav="/reproducibility-with-r/materials/day0/">
            <a href="https://eliocamp.github.io/reproducibility-with-r/materials/day0/">Day 0</a></li>
          
          </li>
        
          
          
          
          <details open class="active">
            <summary class="active" hugo-nav="/reproducibility-with-r/materials/day1/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day1/">Day 1</a></summary>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day1/01-introduction/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day1/01-introduction/">01: What is reproducibilty anyway?</a></li>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day1/02-projects/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day1/02-projects/">02: A tidy project is a happy project</a></li>
            
              
              <li class="active" hugo-nav="/reproducibility-with-r/materials/day1/03-rmarkdown/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day1/03-rmarkdown/">03: Reporting with R Markdown</a></li>
            
          </details>
          
          </li>
        
          
          
          
          <details  class="">
            <summary class="" hugo-nav="/reproducibility-with-r/materials/day2/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day2/">Day 2</a></summary>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day2/01-here/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day2/01-here/">01: here are the portable paths</a></li>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day2/02-git/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day2/02-git/">02: Getting the most of git</a></li>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day2/03-rrtools/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day2/03-rrtools/">03: Research compendia with rrtools</a></li>
            
          </details>
          
          </li>
        
          
          
          
          <details  class="">
            <summary class="" hugo-nav="/reproducibility-with-r/materials/day3/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day3/">Day 3</a></summary>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day3/01-renv/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day3/01-renv/">01: Managing R dependencies with renv</a></li>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day3/02-data/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day3/02-data/">02: Sharing data</a></li>
            
          </details>
          
          </li>
        
          
          
          
          <details  class="">
            <summary class="" hugo-nav="/reproducibility-with-r/materials/day4/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day4/">Day 4</a></summary>
            
              
              <li class="" hugo-nav="/reproducibility-with-r/materials/day4/01-docker/"><a href="https://eliocamp.github.io/reproducibility-with-r/materials/day4/01-docker/">01: Reproducible computational environment with Docker</a></li>
            
          </details>
          
          </li>
        
          
          
          <li class="" hugo-nav="/reproducibility-with-r/materials/reprohack/">
            <a href="https://eliocamp.github.io/reproducibility-with-r/materials/reprohack/">Mini Reprohack</a></li>
          
          </li>
        
          
          
          <li class="" hugo-nav="/reproducibility-with-r/materials/extras/">
            <a href="https://eliocamp.github.io/reproducibility-with-r/materials/extras/">Extras</a></li>
          
          </li>
        
          
          
          <li class="" hugo-nav="/reproducibility-with-r/materials/slides/day1/index_files/libs/revealjs/plugin/notes/speaker-view/">
            <a href="https://eliocamp.github.io/reproducibility-with-r/materials/slides/day1/index_files/libs/revealjs/plugin/notes/speaker-view/"></a></li>
          
          </li>
        
          
          
          <li class="" hugo-nav="/reproducibility-with-r/materials/slides/day2/index_files/libs/revealjs/plugin/notes/speaker-view/">
            <a href="https://eliocamp.github.io/reproducibility-with-r/materials/slides/day2/index_files/libs/revealjs/plugin/notes/speaker-view/"></a></li>
          
          </li>
        
        </ul>
    </nav>
  </div>
  <details id="PageTableOfContents">
    <summary><h2 class="mv0 f5 fw7 ttu tracked dib">On this page<h2></summary>
    <div class="pl2 pr0 mh0">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#r-markdown-files">R Markdown files</a></li>
    <li><a href="#r-markdown-templates">R Markdown Templates</a></li>
    <li><a href="#resources">Resources</a></li>
  </ul>
</nav>
    </div>
  </details>
  
</div>

</aside>

<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2023
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 ml0 mr2 f3 o-90 glow grow" href="https://github.com/eliocamp/reproducibility-with-r/" title="github" target="_blank" rel="noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 ml0 mr2 f3 o-90 glow grow" href="https://mastodon.social/@eliocamp" title="Elio on Mastodon" target="_blank" rel="noopener">
      <i class="fab fa-mastodon purple fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 ml0 mr2 f3 o-90 glow grow" href="https://fosstodon.org/@paocorrales" title="Pao on Mastodon" target="_blank" rel="noopener">
      <i class="fab fa-mastodon green fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/reproducibility-with-r/license/" title="License">License</a>
      
      <a class="dib pv1 ph2 link" href="/reproducibility-with-r/attribution/" title="Attributions">Attributions</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
